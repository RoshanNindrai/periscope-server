{
  "info": {
    "_postman_id": "bc22443d-31c5-40aa-9611-d0f5f4b05c1e",
    "name": "Periscope",
    "description": "Mobile app authentication API collection for email/password authentication, password reset, and email verification with enum-based responses",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "_exporter_id": "1288169"
  },
  "item": [
    {
      "name": "Authentication",
      "item": [
        {
          "name": "Register",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test(\"Response has state field\", function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('state');",
                  "    pm.expect(jsonData.state).to.equal('REGISTERED');",
                  "});",
                  "",
                  "pm.test(\"Response has message field\", function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('message');",
                  "});",
                  "",
                  "pm.test(\"Response has user and token\", function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('user');",
                  "    pm.expect(jsonData).to.have.property('token');",
                  "    ",
                  "    if (jsonData.token) {",
                  "        pm.environment.set(\"auth_token\", jsonData.token);",
                  "        pm.environment.set(\"user_id\", jsonData.user.id);",
                  "        pm.environment.set(\"email\", jsonData.user.email);",
                  "    }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Accept",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"name\": \"Test User\",\n    \"email\": \"test@example.com\",\n    \"password\": \"password123\",\n    \"password_confirmation\": \"password123\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/api/register",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "register"
              ]
            },
            "description": "Register a new user. After registration, user receives email verification link.\n\n**Expected Response State**: `REGISTERED`"
          },
          "response": []
        },
        {
          "name": "Login",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response has state field\", function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('state');",
                  "    pm.expect(jsonData.state).to.equal('LOGGED_IN');",
                  "});",
                  "",
                  "pm.test(\"Response has message field\", function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('message');",
                  "});",
                  "",
                  "pm.test(\"Response has user and token\", function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('user');",
                  "    pm.expect(jsonData).to.have.property('token');",
                  "    ",
                  "    if (jsonData.token) {",
                  "        pm.environment.set(\"auth_token\", jsonData.token);",
                  "        pm.environment.set(\"user_id\", jsonData.user.id);",
                  "    }",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Accept",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"email\": \"{{email}}\",\n    \"password\": \"password123\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/api/login",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "login"
              ]
            },
            "description": "Login with email and password. Returns authentication token.\n\n**Expected Response State**: `LOGGED_IN`\n\n**Error States**:\n- `ACCOUNT_LOCKED` (403) - Account is locked\n- `LOGIN_FAILED` (500) - Server error"
          },
          "response": []
        },
        {
          "name": "Get Current User (Me)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response has state field\", function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('state');",
                  "    pm.expect(jsonData.state).to.equal('USER_RETRIEVED');",
                  "});",
                  "",
                  "pm.test(\"Response has user field\", function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('user');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}",
                "type": "text"
              },
              {
                "key": "Accept",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/me",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "me"
              ]
            },
            "description": "Get the currently authenticated user. Requires Bearer token.\n\n**Expected Response State**: `USER_RETRIEVED`"
          },
          "response": []
        },
        {
          "name": "Logout",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response has state field\", function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('state');",
                  "    pm.expect(jsonData.state).to.equal('LOGGED_OUT');",
                  "});",
                  "",
                  "pm.test(\"Response has message field\", function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('message');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}",
                "type": "text"
              },
              {
                "key": "Accept",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/logout",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "logout"
              ]
            },
            "description": "Logout the current user. Revokes the authentication token.\n\n**Expected Response State**: `LOGGED_OUT`"
          },
          "response": []
        }
      ],
      "description": "Basic authentication endpoints"
    },
    {
      "name": "Password Reset",
      "item": [
        {
          "name": "Forgot Password",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response has state field\", function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('state');",
                  "    pm.expect(jsonData.state).to.equal('PASSWORD_RESET_LINK_SENT');",
                  "});",
                  "",
                  "pm.test(\"Response has message field\", function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('message');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Accept",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"email\": \"{{email}}\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/api/forgot-password",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "forgot-password"
              ]
            },
            "description": "Request password reset. Sends 6-digit code to email instead of reset link. Check logs for code during testing.\n\n**Expected Response State**: `PASSWORD_RESET_LINK_SENT`\n\n**Note**: The 6-digit code will be in storage/logs/laravel.log. Extract it from the email content."
          },
          "response": []
        },
        {
          "name": "Reset Password",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response has state field\", function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('state');",
                  "    pm.expect(jsonData.state).to.equal('PASSWORD_RESET');",
                  "});",
                  "",
                  "pm.test(\"Response has message field\", function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('message');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Accept",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"email\": \"{{email}}\",\n    \"code\": \"{{reset_code}}\",\n    \"password\": \"newpassword123\",\n    \"password_confirmation\": \"newpassword123\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/api/reset-password",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "reset-password"
              ]
            },
            "description": "Reset password with 6-digit code from email. Code expires in 10 minutes. Max 5 attempts.\n\n**Expected Response State**: `PASSWORD_RESET`\n\n**Error States**:\n- `INVALID_RESET_CODE` (422) - Invalid or incorrect code\n- `EXPIRED_RESET_CODE` (422) - Code expired (10 minutes)\n- `MAX_RESET_ATTEMPTS` (422) - Too many failed attempts (5 max)\n- `INVALID_USER` (422) - User not found\n- `PASSWORD_RESET_FAILED` (500) - Server error\n\n**Note**: Get the 6-digit reset code from the password reset email in storage/logs/laravel.log"
          },
          "response": []
        }
      ],
      "description": "Password reset flow"
    },
    {
      "name": "Email Verification",
      "item": [
        {
          "name": "Verify Email",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response has state field\", function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('state');",
                  "    pm.expect(jsonData.state).to.be.oneOf(['EMAIL_VERIFIED', 'EMAIL_ALREADY_VERIFIED']);",
                  "});",
                  "",
                  "pm.test(\"Response has message field\", function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('message');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Accept",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"email\": \"{{email}}\",\n    \"code\": \"{{verification_code}}\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/api/verify-email",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "verify-email"
              ]
            },
            "description": "Verify email with 6-digit code sent via email. Code expires in 10 minutes. Max 5 attempts.\n\n**Expected Response States**:\n- `EMAIL_VERIFIED` - Email successfully verified\n- `EMAIL_ALREADY_VERIFIED` - Email was already verified\n\n**Error States**:\n- `INVALID_VERIFICATION_CODE` (422) - Invalid or incorrect code\n- `EXPIRED_VERIFICATION_CODE` (422) - Code expired (10 minutes)\n- `MAX_VERIFICATION_ATTEMPTS` (422) - Too many failed attempts (5 max)\n- `USER_NOT_FOUND` (404) - User not found\n- `UNABLE_TO_VERIFY_EMAIL` (500) - Server error\n- `EMAIL_VERIFICATION_FAILED` (500) - General failure\n\n**Note**: Extract the 6-digit code from the verification email in storage/logs/laravel.log"
          },
          "response": []
        },
        {
          "name": "Resend Verification Email",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response has state field\", function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('state');",
                  "    pm.expect(jsonData.state).to.be.oneOf(['VERIFICATION_EMAIL_SENT', 'EMAIL_ALREADY_VERIFIED']);",
                  "});",
                  "",
                  "pm.test(\"Response has message field\", function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('message');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}",
                "type": "text"
              },
              {
                "key": "Accept",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/resend-verification-email",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "resend-verification-email"
              ]
            },
            "description": "Resend email verification link. Requires authentication.\n\n**Expected Response States**:\n- `VERIFICATION_EMAIL_SENT` - Email sent successfully\n- `EMAIL_ALREADY_VERIFIED` - Email already verified\n\n**Error States**:\n- `VERIFICATION_EMAIL_SEND_FAILED` (500) - Failed to send email"
          },
          "response": []
        }
      ],
      "description": "Email verification endpoints"
    },
    {
      "name": "Search",
      "item": [
        {
          "name": "Search Users",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response has correct structure\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('status');",
                  "    pm.expect(jsonData).to.have.property('message');",
                  "    pm.expect(jsonData).to.have.property('data');",
                  "    pm.expect(jsonData).to.have.property('meta');",
                  "});",
                  "",
                  "pm.test(\"Meta has pagination info\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.meta).to.have.property('current_page');",
                  "    pm.expect(jsonData.meta).to.have.property('per_page');",
                  "    pm.expect(jsonData.meta).to.have.property('total');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Accept",
                "value": "application/json",
                "type": "text"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{auth_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/users/search?q=john",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "users",
                "search"
              ],
              "query": [
                {
                  "key": "q",
                  "value": "john",
                  "description": "Search term (minimum 2 characters)"
                }
              ]
            },
            "description": "Search for users by username or name. Returns users matching the search term as a prefix.\n\n**Authentication Required:** Yes (Bearer token)\n\n**Rate Limit:** 30 requests per minute\n\n**Search Strategy:**\n1. Exact username match (highest priority)\n2. Username prefix match\n3. Name prefix match\n\n**Query Parameters:**\n- `q` (required): Search term, minimum 2 characters, maximum 100 characters\n\n**Response:**\n- `status`: Response status (users_found, no_results_found)\n- `message`: Human-readable message\n- `data`: Array of user objects\n- `meta`: Pagination metadata"
          },
          "response": [
            {
              "name": "Success - Users Found",
              "originalRequest": {
                "method": "GET",
                "header": [
                  {
                    "key": "Accept",
                    "value": "application/json",
                    "type": "text"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{auth_token}}",
                    "type": "text"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/users/search?q=john",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "users",
                    "search"
                  ],
                  "query": [
                    {
                      "key": "q",
                      "value": "john"
                    }
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n    \"status\": \"users_found\",\n    \"message\": \"Users found matching your search.\",\n    \"data\": [\n        {\n            \"id\": 1,\n            \"name\": \"John Doe\",\n            \"username\": \"john.doe\",\n            \"email_verified_at\": \"2026-01-20T10:00:00.000000Z\"\n        },\n        {\n            \"id\": 2,\n            \"name\": \"Johnny Smith\",\n            \"username\": \"johnny_smith\",\n            \"email_verified_at\": \"2026-01-20T11:30:00.000000Z\"\n        }\n    ],\n    \"meta\": {\n        \"current_page\": 1,\n        \"per_page\": 15,\n        \"total\": 2,\n        \"last_page\": 1\n    }\n}"
            },
            {
              "name": "Success - No Results",
              "originalRequest": {
                "method": "GET",
                "header": [
                  {
                    "key": "Accept",
                    "value": "application/json",
                    "type": "text"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{auth_token}}",
                    "type": "text"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/users/search?q=xyz999",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "users",
                    "search"
                  ],
                  "query": [
                    {
                      "key": "q",
                      "value": "xyz999"
                    }
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n    \"status\": \"no_results_found\",\n    \"message\": \"No users found matching your search.\",\n    \"data\": [],\n    \"meta\": {\n        \"current_page\": 1,\n        \"per_page\": 15,\n        \"total\": 0,\n        \"last_page\": 1\n    }\n}"
            },
            {
              "name": "Error - Validation Failed",
              "originalRequest": {
                "method": "GET",
                "header": [
                  {
                    "key": "Accept",
                    "value": "application/json",
                    "type": "text"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{auth_token}}",
                    "type": "text"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/users/search?q=a",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "users",
                    "search"
                  ],
                  "query": [
                    {
                      "key": "q",
                      "value": "a"
                    }
                  ]
                }
              },
              "status": "Unprocessable Entity",
              "code": 422,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n    \"status\": \"validation_error\",\n    \"error\": \"validation_error\",\n    \"message\": \"Validation failed for the provided search parameters.\",\n    \"errors\": {\n        \"q\": [\n            \"The q field must be at least 2 characters.\"\n        ]\n    }\n}"
            },
            {
              "name": "Error - Unauthorized",
              "originalRequest": {
                "method": "GET",
                "header": [
                  {
                    "key": "Accept",
                    "value": "application/json",
                    "type": "text"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/users/search?q=john",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "users",
                    "search"
                  ],
                  "query": [
                    {
                      "key": "q",
                      "value": "john"
                    }
                  ]
                }
              },
              "status": "Unauthorized",
              "code": 401,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n    \"message\": \"Unauthenticated.\"\n}"
            }
          ]
        }
      ]
    },
    {
      "name": "Health",
      "item": [
        {
          "name": "Health Check",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response has status field\", function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('status');",
                  "    pm.expect(jsonData.status).to.equal('HEALTH_CHECK');",
                  "});",
                  "",
                  "pm.test(\"Response has message field\", function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('message');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Accept",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/health",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "health"
              ]
            },
            "description": "Health check endpoint to verify server is running.\n\n**Expected Response State**: `HEALTH_CHECK`\n\n**Alternative**: Laravel's built-in `/up` endpoint is also available at the root level."
          },
          "response": []
        }
      ]
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          ""
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Global test: Check if response is JSON",
          "pm.test(\"Response is JSON\", function () {",
          "    pm.response.to.be.json;",
          "});"
        ]
      }
    }
  ],
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:8000",
      "type": "string"
    },
    {
      "key": "auth_token",
      "value": "",
      "type": "string"
    },
    {
      "key": "user_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "email",
      "value": "test@example.com",
      "type": "string"
    },
    {
      "key": "reset_code",
      "value": "",
      "type": "string"
    },
    {
      "key": "verification_code",
      "value": "",
      "type": "string"
    }
  ]
}